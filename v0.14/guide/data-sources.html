
<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Data sources - Orbit.js</title>
        <meta charset="utf-8">
        <meta name="description" content="Orbit.js ">
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

        <meta property="og:type" content="article">
        <meta property="og:title" content="Data sources - Orbit.js">
        <meta property="og:description" content="Orbit.js ">
        <meta property="og:image" content="https://http://orbitjs.com/images/logo.png">

        <meta name="twitter:card" content="summary">
        <meta name="twitter:title" content="Data sources - Orbit.js">
        <meta name="twitter:description" content="Orbit.js ">
        <meta name="twitter:image" content="https://http://orbitjs.com/images/logo.png">

        <!-- ****** faviconit.com favicons ****** -->
      	<link rel="shortcut icon" href="/favicon.ico">
      	<link rel="icon" sizes="16x16 32x32 64x64" href="/favicon.ico">
      	<link rel="icon" type="image/png" sizes="196x196" href="/favicon-192.png">
      	<link rel="icon" type="image/png" sizes="160x160" href="/favicon-160.png">
      	<link rel="icon" type="image/png" sizes="96x96" href="/favicon-96.png">
      	<link rel="icon" type="image/png" sizes="64x64" href="/favicon-64.png">
      	<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32.png">
      	<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16.png">
      	<link rel="apple-touch-icon" href="/favicon-57.png">
      	<link rel="apple-touch-icon" sizes="114x114" href="/favicon-114.png">
      	<link rel="apple-touch-icon" sizes="72x72" href="/favicon-72.png">
      	<link rel="apple-touch-icon" sizes="144x144" href="/favicon-144.png">
      	<link rel="apple-touch-icon" sizes="60x60" href="/favicon-60.png">
      	<link rel="apple-touch-icon" sizes="120x120" href="/favicon-120.png">
      	<link rel="apple-touch-icon" sizes="76x76" href="/favicon-76.png">
      	<link rel="apple-touch-icon" sizes="152x152" href="/favicon-152.png">
      	<link rel="apple-touch-icon" sizes="180x180" href="/favicon-180.png">
      	<meta name="msapplication-TileColor" content="#FFFFFF">
      	<meta name="msapplication-TileImage" content="/favicon-144.png">
      	<meta name="msapplication-config" content="/browserconfig.xml">
      	<!-- ****** faviconit.com favicons ****** -->
        <link href='//fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600|Roboto Mono' rel='stylesheet' type='text/css'>

        <!-- main page styles -->
        <link rel="stylesheet" href="/css/page.css">

        <!-- this needs to be loaded before guide's inline scripts -->
        <script>window.PAGE_TYPE = "guide"</script>

        <!-- ga -->
        <script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-1632329-6', 'auto');
            ga('send', 'pageview');
        </script>
    </head>
    <body class="docs">        <div id="mobile-bar" >
            <a class="menu-button"></a>
            <a class="logo" href="/"></a>
        </div>
        <div id="header">
  <a id="logo" href="/">
    <img src="/images/orbitjs.png" alt="Orbit.js">
  </a>
  <ul id="nav">
    <li><a href="/v0.14/guide/" class="nav-link current">Guide</a></li>
<li><a href="/sponsor/" class="nav-link">Sponsor</a></li>
<li><a href="https://github.com/orbitjs/orbit" class="nav-link">GitHub</a></li>
<li class="nav-dropdown-container">
  <a class="nav-link">Community</a><span class="arrow"></span>
  <ul class="nav-dropdown">
    <li class="nav-gitter"><a href="https://gitter.im/orbitjs/orbit.js" class="nav-link" target="_blank">Chat</a></li>
    <li class="nav-twitter"><a href="https://twitter.com/orbitjs" class="nav-link" target="_blank">Twitter</a></li>
  </ul>
</li>


  </ul>
</div>

        
            <div id="main" class="fix-sidebar">
                
                    
    <div class="sidebar">
    <ul class="main-menu">
        <li><a href="/v0.14/guide/" class="nav-link current">Guide</a></li>
<li><a href="/sponsor/" class="nav-link">Sponsor</a></li>
<li><a href="https://github.com/orbitjs/orbit" class="nav-link">GitHub</a></li>
<li class="nav-dropdown-container">
  <a class="nav-link">Community</a><span class="arrow"></span>
  <ul class="nav-dropdown">
    <li class="nav-gitter"><a href="https://gitter.im/orbitjs/orbit.js" class="nav-link" target="_blank">Chat</a></li>
    <li class="nav-twitter"><a href="https://twitter.com/orbitjs" class="nav-link" target="_blank">Twitter</a></li>
  </ul>
</li>


    </ul>
    <div class="list">
        <h2>
            Guide
            <select class="version-select">
                
                <option value="0.14" selected >v0.14</option>
                
            </select>
        </h2>
        <div id="donate" style="margin-bottom: 20px">
            <img src="/images/paypal.png">
            <a href="/sponsor">Sponsor Orbit.js</a>
        </div>
        <ul class="menu-root">
            
            
            
                
                <li>
                    <a href="/v0.14/guide/index.html" class="sidebar-link">Introduction</a>
                </li>
            
                
                <li>
                    <a href="/v0.14/guide/packages.html" class="sidebar-link">Packages</a>
                </li>
            
                
                <li>
                    <a href="/v0.14/guide/getting-started.html" class="sidebar-link">Getting started</a>
                </li>
            
                
                <li>
                    <a href="/v0.14/guide/modeling-data.html" class="sidebar-link">Modeling data</a>
                </li>
            
                
                <li>
                    <a href="/v0.14/guide/data-sources.html" class="sidebar-link current">Data sources</a>
                </li>
            
                
                <li>
                    <a href="/v0.14/guide/updating-data.html" class="sidebar-link">Updating data</a>
                </li>
            
                
                <li>
                    <a href="/v0.14/guide/querying-data.html" class="sidebar-link">Querying data</a>
                </li>
            
                
                <li>
                    <a href="/v0.14/guide/task-processing.html" class="sidebar-link">Task processing</a>
                </li>
            
                
                <li>
                    <a href="/v0.14/guide/data-flows.html" class="sidebar-link">Data flows</a>
                </li>
            
                
                <li>
                    <a href="/v0.14/guide/coordination.html" class="sidebar-link">Coordination</a>
                </li>
            
                
                <li>
                    <a href="/v0.14/guide/license.html" class="sidebar-link">License</a>
                </li>
            
        </ul>
    </div>
</div>


<div class="content guide with-sidebar data-sources-guide">
  
    <h1>Data sources</h1>
  
  <p>Sources provide access to data. They vary widely in their capabilities: some
support interfaces for updating and/or querying records, while others simply
broadcast changes.</p>
<p>Orbit includes a number of “standard” sources:</p>
<ul>
<li><code>@orbit/store</code> - an in-memory store</li>
<li><code>@orbit/jsonapi</code> - a JSON API client</li>
<li><code>@orbit/indexeddb</code> - for accessing IndexedDB databases</li>
<li><code>@orbit/local-storage</code> - for accessing LocalStorage</li>
</ul>
<p>Custom sources can also be written to access to virtually any source of data.</p>
<h2 id="Base-class"><a href="#Base-class" class="headerlink" title="Base class"></a>Base class</h2><p>Every source derives from an abstract base class, <code>Source</code>, which has a core
set of capabilities.</p>
<p>Sources must be instantiated with a schema. A schema provides sources with an
understanding of the domain-specific data they manage.</p>
<p>Let’s create a simple schema and store:</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; Schema &#125; <span class="keyword">from</span> <span class="string">'@orbit/data'</span>;</div><div class="line"><span class="keyword">import</span> Store <span class="keyword">from</span> <span class="string">'@orbit/store'</span>;</div><div class="line"></div><div class="line"><span class="comment">// Create a schema</span></div><div class="line"><span class="keyword">const</span> schema = <span class="keyword">new</span> Schema(&#123;</div><div class="line">  <span class="attr">models</span>: &#123;</div><div class="line">    <span class="attr">planet</span>: &#123;</div><div class="line">      <span class="attr">attributes</span>: &#123;</div><div class="line">        <span class="attr">name</span>: &#123; <span class="attr">type</span>: <span class="string">'string'</span> &#125;,</div><div class="line">        <span class="attr">classification</span>: &#123; <span class="attr">type</span>: <span class="string">'string'</span> &#125;</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;);</div><div class="line"></div><div class="line"><span class="comment">// Create a store that uses the schema</span></div><div class="line"><span class="keyword">const</span> store = <span class="keyword">new</span> Store(&#123; schema &#125;);</div></pre></td></tr></table></figure>
<p>All sources can be mutated, although not all sources support <em>requests</em> to
mutate. Some sources may only reflect mutations that come from elsewhere, such
as a source that wraps server-sent events.</p>
<p>Because all mutations in Orbit are trackable, sources maintain a log of changes,
or “transforms”. This log represents an ordered history of transforms that have
been applied to a source. The size of this log can be kept in check by
truncating it after related sources have been synchronized.</p>
<p>Sources are also all “evented”, meaning that they can emit events which
listeners can subscribe to. All sources support an event, <code>transform</code>, that is
emitted when that source changes. Most sources emit additional events as well
(the specifics depend upon their capabilities).</p>
<p>Let’s look at an example of a simple mutation triggered by a call to <code>update</code>:</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="comment">// Define a record</span></div><div class="line"><span class="keyword">const</span> jupiter = &#123;</div><div class="line">  <span class="attr">type</span>: <span class="string">'planet'</span>,</div><div class="line">  <span class="attr">id</span>: <span class="string">'jupiter'</span>,</div><div class="line">  <span class="attr">attributes</span>: &#123;</div><div class="line">    <span class="attr">name</span>: <span class="string">'Jupiter'</span>,</div><div class="line">    <span class="attr">classification</span>: <span class="string">'gas giant'</span></div><div class="line">  &#125;</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="comment">// Observe and log all transforms</span></div><div class="line">store.on(<span class="string">'transform'</span>, t =&gt; &#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'transform'</span>, t);</div><div class="line">&#125;);</div><div class="line"></div><div class="line"><span class="comment">// Check the size of the transform log before updates</span></div><div class="line"><span class="built_in">console</span>.log(<span class="string">`transforms: <span class="subst">$&#123;store.transformLog.length&#125;</span>`</span>);</div><div class="line"></div><div class="line"><span class="comment">// Update the store with a transform that adds a record</span></div><div class="line">store.update(<span class="function"><span class="params">t</span> =&gt;</span> t.addRecord(jupiter))</div><div class="line">  .then(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">    <span class="comment">// Verify that the transform log has grown</span></div><div class="line">    <span class="built_in">console</span>.log(<span class="string">`transforms: <span class="subst">$&#123;store.transformLog.length&#125;</span>`</span>);</div><div class="line">  &#125;);</div></pre></td></tr></table></figure>
<p>The following should be logged as a result:</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="string">"transforms: 0"</span>,</div><div class="line"></div><div class="line"><span class="string">"transform"</span>, &#123;</div><div class="line">  <span class="attr">operations</span>: [</div><div class="line">    &#123;</div><div class="line">      <span class="attr">op</span>: <span class="string">"addRecord"</span>,</div><div class="line">      <span class="attr">record</span>: &#123;</div><div class="line">        <span class="attr">type</span>: <span class="string">"planet"</span>,</div><div class="line">        <span class="attr">id</span>: <span class="string">"jupiter"</span>,</div><div class="line">        <span class="attr">attributes</span>: &#123;</div><div class="line">          <span class="attr">name</span>: <span class="string">"Jupiter"</span>,</div><div class="line">          <span class="attr">classification</span>: <span class="string">"gas giant"</span></div><div class="line">        &#125;</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line">  ],</div><div class="line">  <span class="attr">options</span>: <span class="literal">undefined</span>,</div><div class="line">  <span class="attr">id</span>: <span class="string">"05e5d20e-02c9-42c4-a083-99662c647fd1"</span></div><div class="line">&#125;,</div><div class="line"></div><div class="line"><span class="string">"transforms: 1"</span></div></pre></td></tr></table></figure>
<blockquote>
<p>Want to learn more about updating data? <a href="./updating-data.html">See the guide</a></p>
</blockquote>
<h2 id="Standard-interfaces"><a href="#Standard-interfaces" class="headerlink" title="Standard interfaces"></a>Standard interfaces</h2><p>Orbit includes a number of standard interfaces that may be implemented by
sources:</p>
<ul>
<li><p><code>Updatable</code> - Allows sources to be updated via an <code>update</code> method that takes
a transform and returns the updated records that result.</p>
</li>
<li><p><code>Queryable</code> - Allows sources to be queried via a <code>query</code> method that receives
a query expression and returns a recordset as a result.</p>
</li>
<li><p><code>Pushable</code> - Allows sources to be updated via a <code>push</code> method that takes a
a transform and returns the results of the change and its side effects as an
array of transforms.</p>
</li>
<li><p><code>Pullable</code> - Allows sources to be queried via a <code>pull</code> method that takes a
query expression and returns the results as an array of transforms.</p>
</li>
<li><p><code>Syncable</code> - Applies a transform or transforms to a source via a <code>sync</code>
method.</p>
</li>
</ul>
<h3 id="Events"><a href="#Events" class="headerlink" title="Events"></a>Events</h3><p>All of the interfaces above emit events that share a common pattern. For an
interface with a given method <code>x</code>, the following events will be emitted:
<code>beforeX</code>, <code>x</code>, and <code>xFail</code>. For example, updatable sources have an <code>update</code>
method and can emit <code>beforeUpdate</code>, <code>update</code>, and <code>updateFail</code> events.</p>
<p>In addition, any mutations caused by calling <code>x</code> will also be emitted with the
general <code>transform</code> event.</p>
<p>Processing occurs as follows (feel free to substitute <code>update</code>, <code>query</code>, etc.
for <code>x</code>):</p>
<ol>
<li><p><code>x</code> is called on a source.</p>
</li>
<li><p>The <code>beforeX</code> event is emitted by the source. Any promises that are returned
from listeners will be settled serially. Any errors encountered will prevent
further processing and cause the source to emit the <code>xFail</code> event.</p>
</li>
<li><p><code>x</code> is processed internally by the source. Any errors encountered will
prevent further processing and cause the source to emit the <code>xFail</code> event.</p>
</li>
<li><p>The <code>transform</code> event is emitted if <code>x</code> resulted in any mutations. Any
promises that are returned from listeners will be settled serially. Errors
will NOT prevent further processing.</p>
</li>
<li><p>The <code>x</code> event is emitted. Any promises that are returned
from listeners will be settled serially. Errors will NOT prevent further
processing.</p>
</li>
</ol>
<p>There’s a clear turning point after <code>x</code> has been processed internally by the
source. While listeners can block processing of <code>x</code> in the <code>beforeX</code> event by
returning a promise that fails, after <code>x</code> has been processed such failures will
be ignored by the emitter.</p>
<h3 id="Data-flows"><a href="#Data-flows" class="headerlink" title="Data flows"></a>Data flows</h3><p>The <code>Updatable</code>, <code>Queryable</code>, <code>Pushable</code>, and <code>Pullable</code> interfaces all
participate in the “request flow”, in which requests are made upstream and data
flows back down.</p>
<p>The <code>Syncable</code> interface participates in the “sync flow”, in which data flowing
downstream is synchronized with other sources.</p>
<blockquote>
<p>Want to learn more about data flows? <a href="./data-flows.html">See the guide</a></p>
</blockquote>
<h3 id="Developer-facing-interfaces"><a href="#Developer-facing-interfaces" class="headerlink" title="Developer-facing interfaces"></a>Developer-facing interfaces</h3><p>Generally speaking, only the <code>Updatable</code> and <code>Queryable</code> interfaces are designed
to be used directly by developers in most applications. The other interfaces are
used to coordinate data requests and synchronization between sources.</p>
<blockquote>
<p>See guides that cover <a href="./querying-data.html">querying data</a>,
  <a href="./updating-data.html">updating data</a>, and
  <a href="./coordination.html">configuring coordination strategies</a>.</p>
</blockquote>

  
    <div class="guide-links">
      
        <span>← <a href="/v0.14/guide/modeling-data.html">Modeling data</a></span>
      
      
        <span style="float:right"><a href="/v0.14/guide/updating-data.html">Updating data</a> →</span>
      
    </div>
  
  <div class="footer">
    Want to correct or improve this documentation?
    <a href="https://github.com/orbitjs/orbitjs-site/blob/master/src/v0.14/guide/data-sources.md" target="_blank">
      Edit this page on Github!
    </a>
  </div>
</div>

                
            </div>
            <script src="/js/smooth-scroll.min.js"></script>
        

        <!-- main custom script for sidebars, version selects etc. -->
        <script src="/js/common.js"></script>

        <!-- fastclick -->
        <script src="//cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.6/fastclick.min.js"></script>
        <script>
        document.addEventListener('DOMContentLoaded', function() {
          FastClick.attach(document.body)
        }, false)
        </script>
    </body>
</html>
