
<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Data flows - Orbit.js</title>
        <meta charset="utf-8">
        <meta name="description" content="A framework for orchestrating access, transformation, and synchronization between data sources.">
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

        <meta property="og:type" content="article">
        <meta property="og:title" content="Data flows - Orbit.js">
        <meta property="og:description" content="A framework for orchestrating access, transformation, and synchronization between data sources.">
        <meta property="og:image" content="http://http://orbitjs.com/images/logo.png">

        <meta name="twitter:card" content="summary">
        <meta name="twitter:title" content="Data flows - Orbit.js">
        <meta name="twitter:description" content="A framework for orchestrating access, transformation, and synchronization between data sources.">
        <meta name="twitter:image" content="http://http://orbitjs.com/images/logo.png">

        <!-- ****** faviconit.com favicons ****** -->
      	<link rel="shortcut icon" href="/favicon.ico">
      	<link rel="icon" sizes="16x16 32x32 64x64" href="/favicon.ico">
      	<link rel="icon" type="image/png" sizes="196x196" href="/favicon-192.png">
      	<link rel="icon" type="image/png" sizes="160x160" href="/favicon-160.png">
      	<link rel="icon" type="image/png" sizes="96x96" href="/favicon-96.png">
      	<link rel="icon" type="image/png" sizes="64x64" href="/favicon-64.png">
      	<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32.png">
      	<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16.png">
      	<link rel="apple-touch-icon" href="/favicon-57.png">
      	<link rel="apple-touch-icon" sizes="114x114" href="/favicon-114.png">
      	<link rel="apple-touch-icon" sizes="72x72" href="/favicon-72.png">
      	<link rel="apple-touch-icon" sizes="144x144" href="/favicon-144.png">
      	<link rel="apple-touch-icon" sizes="60x60" href="/favicon-60.png">
      	<link rel="apple-touch-icon" sizes="120x120" href="/favicon-120.png">
      	<link rel="apple-touch-icon" sizes="76x76" href="/favicon-76.png">
      	<link rel="apple-touch-icon" sizes="152x152" href="/favicon-152.png">
      	<link rel="apple-touch-icon" sizes="180x180" href="/favicon-180.png">
      	<meta name="msapplication-TileColor" content="#FFFFFF">
      	<meta name="msapplication-TileImage" content="/favicon-144.png">
      	<meta name="msapplication-config" content="/browserconfig.xml">
      	<!-- ****** faviconit.com favicons ****** -->
        <link href='//fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600|Roboto Mono' rel='stylesheet' type='text/css'>

        <!-- main page styles -->
        <link rel="stylesheet" href="/css/page.css">

        <!-- this needs to be loaded before guide's inline scripts -->
        <script>window.PAGE_TYPE = "guide"</script>

        <!-- ga -->
        <script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-1632329-6', 'auto');
            ga('send', 'pageview');
        </script>
    </head>
    <body class="docs">        <div id="mobile-bar" >
            <a class="menu-button"></a>
            <a class="logo" href="/"></a>
        </div>
        <div id="header">
  <a id="logo" href="/">
    <img src="/images/orbitjs.png" alt="Orbit.js">
  </a>
  <ul id="nav">
    <li><a href="/v0.15/guide/" class="nav-link current">Guide</a></li>
<li><a href="/sponsor/" class="nav-link">Sponsor</a></li>
<li><a href="https://github.com/orbitjs/orbit" class="nav-link">GitHub</a></li>
<li class="nav-dropdown-container">
  <a class="nav-link">Community</a><span class="arrow"></span>
  <ul class="nav-dropdown">
    <li class="nav-gitter"><a href="https://gitter.im/orbitjs/orbit.js" class="nav-link" target="_blank">Chat</a></li>
    <li class="nav-twitter"><a href="https://twitter.com/orbitjs" class="nav-link" target="_blank">Twitter</a></li>
  </ul>
</li>


  </ul>
</div>

        
            <div id="main" class="fix-sidebar">
                
                    
    <div class="sidebar">
    <ul class="main-menu">
        <li><a href="/v0.15/guide/" class="nav-link current">Guide</a></li>
<li><a href="/sponsor/" class="nav-link">Sponsor</a></li>
<li><a href="https://github.com/orbitjs/orbit" class="nav-link">GitHub</a></li>
<li class="nav-dropdown-container">
  <a class="nav-link">Community</a><span class="arrow"></span>
  <ul class="nav-dropdown">
    <li class="nav-gitter"><a href="https://gitter.im/orbitjs/orbit.js" class="nav-link" target="_blank">Chat</a></li>
    <li class="nav-twitter"><a href="https://twitter.com/orbitjs" class="nav-link" target="_blank">Twitter</a></li>
  </ul>
</li>


    </ul>
    <div class="list">
        <h2>
            Guide
            <select class="version-select">
                
                <option value="0.15" selected >v0.15</option>
                
            </select>
        </h2>
        <div id="donate" style="margin-bottom: 20px">
            <img src="/images/paypal.png">
            <a href="/sponsor">Sponsor Orbit.js</a>
        </div>
        <ul class="menu-root">
            
            
            
                
                <li>
                    <a href="/v0.15/guide/index.html" class="sidebar-link">Introduction</a>
                </li>
            
                
                <li>
                    <a href="/v0.15/guide/packages.html" class="sidebar-link">Packages</a>
                </li>
            
                
                <li>
                    <a href="/v0.15/guide/getting-started.html" class="sidebar-link">Getting started</a>
                </li>
            
                
                <li>
                    <a href="/v0.15/guide/modeling-data.html" class="sidebar-link">Modeling data</a>
                </li>
            
                
                <li>
                    <a href="/v0.15/guide/data-sources.html" class="sidebar-link">Data sources</a>
                </li>
            
                
                <li>
                    <a href="/v0.15/guide/updating-data.html" class="sidebar-link">Updating data</a>
                </li>
            
                
                <li>
                    <a href="/v0.15/guide/querying-data.html" class="sidebar-link">Querying data</a>
                </li>
            
                
                <li>
                    <a href="/v0.15/guide/task-processing.html" class="sidebar-link">Task processing</a>
                </li>
            
                
                <li>
                    <a href="/v0.15/guide/data-flows.html" class="sidebar-link current">Data flows</a>
                </li>
            
                
                <li>
                    <a href="/v0.15/guide/coordination.html" class="sidebar-link">Coordination strategies</a>
                </li>
            
                
                <li>
                    <a href="/v0.15/guide/data-stores.html" class="sidebar-link">Data stores</a>
                </li>
            
                
                <li>
                    <a href="/v0.15/guide/license.html" class="sidebar-link">License</a>
                </li>
            
        </ul>
    </div>
</div>


<div class="content guide with-sidebar data-flows-guide">
  
    <h1>Data flows</h1>
  
  <p>Orbit enables the coordination of many independent sources of data, each of
which may internally handle queries and updates differently. It’s easy to
imagine tying oneself in knots with such potential complexity. However, by
following Orbit’s conventions and a few guidelines, you can compose data to
flow predictably and reliably through your application.</p>
<h2 id="“Request-up-sync-down”"><a href="#“Request-up-sync-down”" class="headerlink" title="“Request up, sync down”"></a>“Request up, sync down”</h2><p>Orbit divides the movement of data into two different “flows”:</p>
<ul>
<li><p><strong>Request flow</strong> - Requests to query or update data originate from an
application and flow upstream to a source that can fulfill the request.</p>
</li>
<li><p><strong>Sync flow</strong> - Mutations then flow back downstream and are synchronized
with all the sources that are concerned.</p>
</li>
</ul>
<p>Every source interface has events and methods that correspond with one of these
flows:</p>
<ul>
<li><p>The <code>Updatable</code>, <code>Queryable</code>, <code>Pushable</code>, and <code>Pullable</code> interfaces all
participate in the request flow.</p>
</li>
<li><p>The <code>Syncable</code> interface participates in the sync flow.</p>
</li>
</ul>
<blockquote>
<p>“Request up, sync down” is a variant of the “data down, actions up” mnemonic
popularized in the <a href="https://emberjs.com/" target="_blank" rel="external">Ember.js</a> community. In fact, most
frontend frameworks adopt a similar pattern for handling actions and returning
data. Orbit fits well with these patterns: an action triggered by a user can
spawn an Orbit “request”, which can lead to responses that “sync” data back
down, typically ending in an update to a view. In this way, “request up, sync
down” can be seen as a continuation of the “data down, actions up” pattern.</p>
</blockquote>
<h2 id="Coordinating-sources"><a href="#Coordinating-sources" class="headerlink" title="Coordinating sources"></a>Coordinating sources</h2><p>Request and sync flows can be coordinated across sources by configuring an event
listener for one source that triggers actions on another.</p>
<p>Let’s take a look at what events can trigger other actions:</p>
<ul>
<li><p>Update events (<code>beforeUpdate</code>, <code>update</code>, <code>beforePush</code>, <code>push</code>) can trigger
<code>push</code></p>
</li>
<li><p>Query events (<code>beforeQuery</code>, <code>query</code>, <code>beforePull</code>, <code>pull</code>) can trigger <code>pull</code></p>
</li>
<li><p>Change events (<code>transform</code>, <code>beforeSync</code>, <code>sync</code>) - can trigger <code>sync</code></p>
</li>
</ul>
<h3 id="Blocking-vs-non-blocking"><a href="#Blocking-vs-non-blocking" class="headerlink" title="Blocking vs. non-blocking"></a>Blocking vs. non-blocking</h3><p>We can coordinate sources through simple event listeners, such as:</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line">store.on(<span class="string">'beforeUpdate'</span>, transform =&gt; &#123;</div><div class="line">  remote.push(transform);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>The above listener is “non-blocking” because it doesn’t return anything to
the emitter. The call to <code>remote.push()</code> is async and may take a while to
complete, so it will proceed in parallel with the store being updated.</p>
<p>As an alternative, we can use a “blocking” strategy in our event listener by
simply returning a promise:</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line">store.on(<span class="string">'beforeUpdate'</span>, transform =&gt; remote.push(transform));</div></pre></td></tr></table></figure>
<p>This will prevent the <code>store</code> from updating before the transform has been pushed
up to the <code>remote</code> source. An error in <code>remote.push</code> will cause <code>store.update</code>
to error as well.</p>
<h3 id="Coordination-guidelines"><a href="#Coordination-guidelines" class="headerlink" title="Coordination guidelines"></a>Coordination guidelines</h3><p>Here are some guidelines for working with data flows:</p>
<ul>
<li><p>Consider the full arc of each request - how it will flow up to be fulfilled,
and how results and/or errors will be synchronized on the way back down.</p>
</li>
<li><p>Avoid spawning requests from the synchronization flow. A change event
(<code>beforeSync</code>, <code>sync</code>, or <code>transform</code>) should only ever trigger a <code>sync</code>
action.</p>
</li>
<li><p>For pessimistic requests in which you must guarantee success before
proceeding, use blocking connections for all the request and
sync flows that may be involved.</p>
</li>
</ul>
<p>Last but not least, it’s recommended that you use a <code>Coordinator</code> instead of
manually configuring event listeners. Read on to understand why …</p>

  
    <div class="guide-links">
      
        <span>← <a href="/v0.15/guide/task-processing.html">Task processing</a></span>
      
      
        <span style="float:right"><a href="/v0.15/guide/coordination.html">Coordination strategies</a> →</span>
      
    </div>
  
  <div class="footer">
    Want to correct or improve this documentation?
    <a href="https://github.com/orbitjs/orbitjs-site/blob/master/src/v0.15/guide/data-flows.md" target="_blank">
      Edit this page on Github!
    </a>
  </div>
</div>

                
            </div>
            <script src="/js/smooth-scroll.min.js"></script>
        

        <!-- main custom script for sidebars, version selects etc. -->
        <script src="/js/common.js"></script>

        <!-- fastclick -->
        <script src="//cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.6/fastclick.min.js"></script>
        <script>
        document.addEventListener('DOMContentLoaded', function() {
          FastClick.attach(document.body)
        }, false)
        </script>
    </body>
</html>
