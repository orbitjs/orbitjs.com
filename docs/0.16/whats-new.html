<!doctype html>
<html class="docs-version-0.16" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.14">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Orbit.js RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Orbit.js Atom Feed">
<link rel="alternate" type="application/json" href="/blog/feed.json" title="Orbit.js JSON Feed"><title data-react-helmet="true">What&#x27;s new in v0.16 | Orbit.js</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://orbitjs.com/docs/0.16/whats-new"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="0.16"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-0.16"><meta data-react-helmet="true" property="og:title" content="What&#x27;s new in v0.16 | Orbit.js"><meta data-react-helmet="true" name="description" content="This is a distillation of what&#x27;s new in Orbit v0.16, intended as a reference for developers who need to upgrade their apps and libraries from v0.15."><meta data-react-helmet="true" property="og:description" content="This is a distillation of what&#x27;s new in Orbit v0.16, intended as a reference for developers who need to upgrade their apps and libraries from v0.15."><link data-react-helmet="true" rel="icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://orbitjs.com/docs/0.16/whats-new"><link data-react-helmet="true" rel="alternate" href="https://orbitjs.com/docs/0.16/whats-new" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://orbitjs.com/docs/0.16/whats-new" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.74aa2cd0.css">
<link rel="preload" href="/assets/js/runtime~main.21463acc.js" as="script">
<link rel="preload" href="/assets/js/main.7f38654e.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/orbitjs-text.svg" alt="Orbit.js" class="themedImage_1VuW themedImage--light_3UqQ"><img src="/img/orbitjs-text.svg" alt="Orbit.js" class="themedImage_1VuW themedImage--dark_hz6m"></div></a><a class="navbar__item navbar__link navbar__link--active" href="/docs/0.16/intro">Docs</a><a class="navbar__item navbar__link" href="/docs/0.16/api">API</a><a class="navbar__item navbar__link" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" href="/docs/0.16/intro">0.16</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/whats-new">0.17</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/0.16/whats-new">0.16</a></li><li><a class="dropdown__link" href="/docs/0.15/intro">0.15</a></li><li><a class="dropdown__link" href="/versions">All versions</a></li></ul></div><a href="https://github.com/orbitjs/orbit" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link"></a><div class="toggle_71bT toggle_3Zt9 toggleDisabled_3cF-"><div class="toggleTrack_32Fl" role="button" tabindex="-1"><div class="toggleTrackCheck_3lV7"><span class="toggleIcon_O4iE">🌜</span></div><div class="toggleTrackX_S2yS"><span class="toggleIcon_O4iE">🌞</span></div><div class="toggleTrackThumb_xI_Z"></div></div><input type="checkbox" class="toggleScreenReader_28Tw" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_35hR" type="button"></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/0.16/intro">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/0.16/getting-started">Getting started</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/docs/0.16/whats-new">What&#x27;s new in v0.16</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/0.16/packages">Packages</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/0.16/modeling-data">Modeling data</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/0.16/data-sources">Data sources</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/0.16/updating-data">Updating data</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/0.16/querying-data">Querying data</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/0.16/task-processing">Task processing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/0.16/data-flows">Data flows</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/0.16/coordination">Coordination strategies</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/0.16/memory-sources">Memory sources</a></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>This is documentation for <!-- -->Orbit.js<!-- --> <b>0.16</b>, which is no longer actively maintained.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/docs/whats-new">latest version</a></b> (<!-- -->0.17<!-- -->).</div></div><div class="docItemContainer_33ec"><article><span class="theme-doc-version-badge badge badge--secondary">Version: <!-- -->0.16</span><div class="tocCollapsible_1PrD theme-doc-toc-mobile tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>What&#x27;s new in v0.16</h1></header><p>This is a distillation of what&#x27;s new in Orbit v0.16, intended as a reference for developers who need to upgrade their apps and libraries from v0.15.</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="changelog-and-release-notes">Changelog and release notes<a class="hash-link" href="#changelog-and-release-notes" title="Direct link to heading">​</a></h2><p>The v0.16 beta cycle represents the first releases with a formal <a href="https://github.com/orbitjs/orbit/blob/master/CHANGELOG.md" target="_blank" rel="noopener noreferrer">changelog</a> and <a href="https://github.com/orbitjs/orbit/releases" target="_blank" rel="noopener noreferrer">release notes</a>. We&#x27;re committed to continuing this process going forward.</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="new-and-renamed-packages">New (and renamed) packages<a class="hash-link" href="#new-and-renamed-packages" title="Direct link to heading">​</a></h2><p>New packages have been introduced since v0.15:</p><ul><li><p><code>@orbit/memory</code> - The <code>@orbit/store</code> package has been deprecated in favor of a new <code>@orbit/memory</code> package (which contains all the same functionality). This clears the way for future Orbit packages that contain higher level Model and Store primitives.</p></li><li><p><code>@orbit/record-cache</code> - Extracts the <code>Cache</code> class from <code>@orbit/memory</code> as well as its associated processors to provide an abstract base for creating sources that access and maintain a complete set of records. Sync and async versions of caching logic are supported. This package is now used not only by <code>@orbit/memory</code>, but also by <code>@orbit/indexeddb</code> and <code>@orbit/local-storage</code>.</p></li><li><p><code>@orbit/serializers</code> - A set of interfaces and serializer classes that can be used by sources to serialize / deserialize primitive data types. Serializers are now used within the JSONAPISerializer to handle types such as <code>boolean</code>, <code>string</code>, <code>date</code>, <code>datetime</code>, and <code>number</code>. Serializers for custom types can also be registered (see <a href="https://github.com/orbitjs/orbit/pull/591" target="_blank" rel="noopener noreferrer">https://github.com/orbitjs/orbit/pull/591</a> for a complete description).</p></li><li><p><code>@orbit/identity-map</code> - A new identity map for managing model instances. Intended for building Model and Store primitives.</p></li></ul><h2 class="anchor anchorWithStickyNavbar_31ik" id="build-targets">Build targets<a class="hash-link" href="#build-targets" title="Direct link to heading">​</a></h2><p>Orbit continues to ship with a matrix of distributions that combine different
module types (ESM, CJS, and even AMD) with language levels (ES5 and ES2017).</p><p>Because the codebase now extensively uses <code>async</code> / <code>await</code> as well as
<code>for ... of</code>, the ES5 builds now must be paired with the <code>regenerator-runtime</code>
package to ensure that the <code>regeneratorRuntime</code> global is defined.</p><p>The default builds targeted by each package&#x27;s <code>main</code> and <code>module</code> are now
ES-latest. These builds are as small and performant as possible, and of course
can be further processed with Babel if necessary.</p><p><em>Important: There were still some build issues in v0.16.0, which have been resolved in v0.16.1. Please upgrade!</em></p><h2 class="anchor anchorWithStickyNavbar_31ik" id="request-hints">Request hints<a class="hash-link" href="#request-hints" title="Direct link to heading">​</a></h2><p>Orbit v0.16 introduces the concept of &quot;hints&quot;, which allow request listeners to
influence the results that a source returns from that request.</p><p>The main reason to use hints is to allow sources to take into account outside
information when processing a request. For instance, let&#x27;s say that a user
queries a memory source and wants records returned in the same order they&#x27;re
returned from the server. If the server is using a complex sorting algorithm, it
may be impossible to recreate that same logic (and full dataset) on the client
in the <code>MemorySource</code>.</p><p>Read more about using hints in the guide to <a href="/docs/0.16/coordination#using-hints">coordination
strategies</a>.</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="memory-sources-can-now-be-rebased">Memory sources can now be &quot;rebased&quot;<a class="hash-link" href="#memory-sources-can-now-be-rebased" title="Direct link to heading">​</a></h2><p>A new <code>rebase</code> method has been added to <code>@orbit/memory</code>. The <code>rebase</code> method works similarly to a git rebase. After a memory source has been forked, there will be two sources: a base and a fork. Both may be updated with transforms. When <code>fork.rebase()</code> is called, any commits on the fork will be undone, the commits to the base store since the fork point will be replayed on the fork, and then the commits on the fork will be replayed on top.</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="polymorphic-relationship-support">Polymorphic relationship support<a class="hash-link" href="#polymorphic-relationship-support" title="Direct link to heading">​</a></h2><p>Relationships in your schemas can now specify multiple possible models as an array in the <code>model</code> field. For example:</p><div class="codeBlockContainer_K1bP language-typescript theme-code-block"><div class="codeBlockContent_hGly typescript"><pre tabindex="0" class="prism-code language-typescript codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      models</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        star</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          relationships</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            celestialObjects</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">type</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;hasMany&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> model</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;planet&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;moon&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> inverse</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;star&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>In this way, a star can have both planets and moons as <code>celestialObjects</code>. Orbit is now one step closer to full JSON:API compliance! ⭐️</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="jsonapi-source-customizations">JSON:API source customizations<a class="hash-link" href="#jsonapi-source-customizations" title="Direct link to heading">​</a></h2><p>The <code>@orbit/jsonapi</code> source now does its request processing in a new customizable <code>JSONAPIRequestProcessor</code> and <code>JSONAPIURLBuilder</code> classes.</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="preliminary-support-jsonapi-operations">Preliminary: Support JSON:API operations<a class="hash-link" href="#preliminary-support-jsonapi-operations" title="Direct link to heading">​</a></h2><p>This release introduces preliminary and partial support for <a href="https://github.com/json-api/json-api/pull/1254" target="_blank" rel="noopener noreferrer">JSON:API Operations</a> in <code>@orbit/jsonapi</code>, which are expected to be introduced to the JSON:API spec soon. Serialization and deserialization support for operations has been added to the <code>JSONAPISerializer</code> class. Further support will be added to the <code>JSONAPISource</code> for processing requests that include operations.</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="breaking-new-expectations-for-sources">Breaking: New expectations for sources!<a class="hash-link" href="#breaking-new-expectations-for-sources" title="Direct link to heading">​</a></h2><p>While testing the hinting feature and its interactions with different source interfaces, Paul Chavard (@tchak) uncovered some scenarios in which hints could fail to return expected results (see <a href="https://github.com/orbitjs/orbit/pull/612" target="_blank" rel="noopener noreferrer">#612</a>). This led to a quest to understand those problems and fix them across source interfaces. Unfortunately, in order to guarantee predictable and consistent behavior, we needed to move some responsibilities to source implementations that were previously handled in Orbit&#x27;s private implementations of those interfaces.</p><p>Thus, if you&#x27;re writing sources, please ensure that you do the following in any of your internal implementation methods that work with transforms (e.g. <code>_update</code>, <code>_sync</code>, etc.):</p><ul><li><p>Check the <code>transformLog</code> for the requested transform to see if work actually needs to be done before doing it.</p></li><li><p>Invoke <code>transformed</code> for any transforms that are applied.</p></li></ul><p>By moving these responsibilities to source implementations, we allow more flexibility in implementations. For instance, <code>_update</code> can ignore re-applying transforms that may have been sync&#x27;d via <code>beforeUpdate</code> listeners, while still returning results that are specified via the <code>hints</code> argument.</p><p>In order to update the <code>@orbit/memory</code> source to both support hints and respond to the above requirements, the following changes were needed:</p><div class="codeBlockContainer_K1bP language-diff theme-code-block"><div class="codeBlockContent_hGly diff"><pre tabindex="0" class="prism-code language-diff codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line"> /////////////////////////////////////////////////////////////////////////////</span><br></span><span class="token-line" style="color:#393A34"><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line"> // Syncable interface implementation</span><br></span><span class="token-line" style="color:#393A34"><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line"> /////////////////////////////////////////////////////////////////////////////</span><br></span><span class="token-line" style="color:#393A34"><span class="token unchanged line"></span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line"> async _sync(transform: Transform): Promise&lt;void&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token unchanged line"></span><span class="token deleted-sign deleted prefix deleted" style="color:#d73a49">-</span><span class="token deleted-sign deleted line" style="color:#d73a49">    this._applyTransform(transform);</span><br></span><span class="token-line" style="color:#393A34"><span class="token deleted-sign deleted line" style="color:#d73a49"></span><span class="token inserted-sign inserted prefix inserted" style="color:#36acaa">+</span><span class="token inserted-sign inserted line" style="color:#36acaa">    if (!this.transformLog.contains(transform.id)) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token inserted-sign inserted line" style="color:#36acaa"></span><span class="token inserted-sign inserted prefix inserted" style="color:#36acaa">+</span><span class="token inserted-sign inserted line" style="color:#36acaa">      this._applyTransform(transform); // &lt;- internal implementation that applies the transform to the source&#x27;s cache</span><br></span><span class="token-line" style="color:#393A34"><span class="token inserted-sign inserted line" style="color:#36acaa"></span><span class="token inserted-sign inserted prefix inserted" style="color:#36acaa">+</span><span class="token inserted-sign inserted line" style="color:#36acaa">      await this.transformed([transform]);</span><br></span><span class="token-line" style="color:#393A34"><span class="token inserted-sign inserted line" style="color:#36acaa"></span><span class="token inserted-sign inserted prefix inserted" style="color:#36acaa">+</span><span class="token inserted-sign inserted line" style="color:#36acaa">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token inserted-sign inserted line" style="color:#36acaa"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line"> }</span><br></span><span class="token-line" style="color:#393A34"><span class="token unchanged line"></span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line"> /////////////////////////////////////////////////////////////////////////////</span><br></span><span class="token-line" style="color:#393A34"><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line"> // Updatable interface implementation</span><br></span><span class="token-line" style="color:#393A34"><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line"> /////////////////////////////////////////////////////////////////////////////</span><br></span><span class="token-line" style="color:#393A34"><span class="token unchanged line"></span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line"> async _update(transform: Transform, hints?: any): Promise&lt;any&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token unchanged line"></span><span class="token deleted-sign deleted prefix deleted" style="color:#d73a49">-</span><span class="token deleted-sign deleted line" style="color:#d73a49">    return this._applyTransform(transform);</span><br></span><span class="token-line" style="color:#393A34"><span class="token deleted-sign deleted line" style="color:#d73a49"></span><span class="token inserted-sign inserted prefix inserted" style="color:#36acaa">+</span><span class="token inserted-sign inserted line" style="color:#36acaa">    let results: PatchResultData[];</span><br></span><span class="token-line" style="color:#393A34"><span class="token inserted-sign inserted line" style="color:#36acaa"></span><span class="token inserted-sign inserted prefix inserted" style="color:#36acaa">+</span><span class="token inserted-sign inserted line" style="color:#36acaa"></span><br></span><span class="token-line" style="color:#393A34"><span class="token inserted-sign inserted line" style="color:#36acaa"></span><span class="token inserted-sign inserted prefix inserted" style="color:#36acaa">+</span><span class="token inserted-sign inserted line" style="color:#36acaa">    if (!this.transformLog.contains(transform.id)) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token inserted-sign inserted line" style="color:#36acaa"></span><span class="token inserted-sign inserted prefix inserted" style="color:#36acaa">+</span><span class="token inserted-sign inserted line" style="color:#36acaa">      results = this._applyTransform(transform); // &lt;- internal implementation that applies the transform to the source&#x27;s cache</span><br></span><span class="token-line" style="color:#393A34"><span class="token inserted-sign inserted line" style="color:#36acaa"></span><span class="token inserted-sign inserted prefix inserted" style="color:#36acaa">+</span><span class="token inserted-sign inserted line" style="color:#36acaa">      await this.transformed([transform]);</span><br></span><span class="token-line" style="color:#393A34"><span class="token inserted-sign inserted line" style="color:#36acaa"></span><span class="token inserted-sign inserted prefix inserted" style="color:#36acaa">+</span><span class="token inserted-sign inserted line" style="color:#36acaa">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token inserted-sign inserted line" style="color:#36acaa"></span><span class="token inserted-sign inserted prefix inserted" style="color:#36acaa">+</span><span class="token inserted-sign inserted line" style="color:#36acaa"></span><br></span><span class="token-line" style="color:#393A34"><span class="token inserted-sign inserted line" style="color:#36acaa"></span><span class="token inserted-sign inserted prefix inserted" style="color:#36acaa">+</span><span class="token inserted-sign inserted line" style="color:#36acaa">    if (hints &amp;&amp; hints.data) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token inserted-sign inserted line" style="color:#36acaa"></span><span class="token inserted-sign inserted prefix inserted" style="color:#36acaa">+</span><span class="token inserted-sign inserted line" style="color:#36acaa">      if (transform.operations.length &gt; 1 &amp;&amp; Array.isArray(hints.data)) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token inserted-sign inserted line" style="color:#36acaa"></span><span class="token inserted-sign inserted prefix inserted" style="color:#36acaa">+</span><span class="token inserted-sign inserted line" style="color:#36acaa">        return hints.data.map((idOrIds: RecordIdentity | RecordIdentity[]) =&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token inserted-sign inserted line" style="color:#36acaa"></span><span class="token inserted-sign inserted prefix inserted" style="color:#36acaa">+</span><span class="token inserted-sign inserted line" style="color:#36acaa">          this._retrieveFromCache(idOrIds)</span><br></span><span class="token-line" style="color:#393A34"><span class="token inserted-sign inserted line" style="color:#36acaa"></span><span class="token inserted-sign inserted prefix inserted" style="color:#36acaa">+</span><span class="token inserted-sign inserted line" style="color:#36acaa">        );</span><br></span><span class="token-line" style="color:#393A34"><span class="token inserted-sign inserted line" style="color:#36acaa"></span><span class="token inserted-sign inserted prefix inserted" style="color:#36acaa">+</span><span class="token inserted-sign inserted line" style="color:#36acaa">      } else {</span><br></span><span class="token-line" style="color:#393A34"><span class="token inserted-sign inserted line" style="color:#36acaa"></span><span class="token inserted-sign inserted prefix inserted" style="color:#36acaa">+</span><span class="token inserted-sign inserted line" style="color:#36acaa">        return this._retrieveFromCache(hints.data);</span><br></span><span class="token-line" style="color:#393A34"><span class="token inserted-sign inserted line" style="color:#36acaa"></span><span class="token inserted-sign inserted prefix inserted" style="color:#36acaa">+</span><span class="token inserted-sign inserted line" style="color:#36acaa">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token inserted-sign inserted line" style="color:#36acaa"></span><span class="token inserted-sign inserted prefix inserted" style="color:#36acaa">+</span><span class="token inserted-sign inserted line" style="color:#36acaa">    } else if (results) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token inserted-sign inserted line" style="color:#36acaa"></span><span class="token inserted-sign inserted prefix inserted" style="color:#36acaa">+</span><span class="token inserted-sign inserted line" style="color:#36acaa">      if (transform.operations.length === 1 &amp;&amp; Array.isArray(results)) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token inserted-sign inserted line" style="color:#36acaa"></span><span class="token inserted-sign inserted prefix inserted" style="color:#36acaa">+</span><span class="token inserted-sign inserted line" style="color:#36acaa">        return results[0];</span><br></span><span class="token-line" style="color:#393A34"><span class="token inserted-sign inserted line" style="color:#36acaa"></span><span class="token inserted-sign inserted prefix inserted" style="color:#36acaa">+</span><span class="token inserted-sign inserted line" style="color:#36acaa">      } else {</span><br></span><span class="token-line" style="color:#393A34"><span class="token inserted-sign inserted line" style="color:#36acaa"></span><span class="token inserted-sign inserted prefix inserted" style="color:#36acaa">+</span><span class="token inserted-sign inserted line" style="color:#36acaa">        return results;</span><br></span><span class="token-line" style="color:#393A34"><span class="token inserted-sign inserted line" style="color:#36acaa"></span><span class="token inserted-sign inserted prefix inserted" style="color:#36acaa">+</span><span class="token inserted-sign inserted line" style="color:#36acaa">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token inserted-sign inserted line" style="color:#36acaa"></span><span class="token inserted-sign inserted prefix inserted" style="color:#36acaa">+</span><span class="token inserted-sign inserted line" style="color:#36acaa">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token inserted-sign inserted line" style="color:#36acaa"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line"> }</span><br></span><span class="token-line" style="color:#393A34"><span class="token unchanged line"></span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line"> /////////////////////////////////////////////////////////////////////////////</span><br></span><span class="token-line" style="color:#393A34"><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line"> // Queryable interface implementation</span><br></span><span class="token-line" style="color:#393A34"><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line"> /////////////////////////////////////////////////////////////////////////////</span><br></span><span class="token-line" style="color:#393A34"><span class="token unchanged line"></span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line"> async _query(query: Query, hints?: any): Promise&lt;any&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token unchanged line"></span><span class="token deleted-sign deleted prefix deleted" style="color:#d73a49">-</span><span class="token deleted-sign deleted line" style="color:#d73a49">    return this._cache.query(query);</span><br></span><span class="token-line" style="color:#393A34"><span class="token deleted-sign deleted line" style="color:#d73a49"></span><span class="token inserted-sign inserted prefix inserted" style="color:#36acaa">+</span><span class="token inserted-sign inserted line" style="color:#36acaa">    if (hints &amp;&amp; hints.data) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token inserted-sign inserted line" style="color:#36acaa"></span><span class="token inserted-sign inserted prefix inserted" style="color:#36acaa">+</span><span class="token inserted-sign inserted line" style="color:#36acaa">      return this._retrieveFromCache(hints.data);</span><br></span><span class="token-line" style="color:#393A34"><span class="token inserted-sign inserted line" style="color:#36acaa"></span><span class="token inserted-sign inserted prefix inserted" style="color:#36acaa">+</span><span class="token inserted-sign inserted line" style="color:#36acaa">    } else {</span><br></span><span class="token-line" style="color:#393A34"><span class="token inserted-sign inserted line" style="color:#36acaa"></span><span class="token inserted-sign inserted prefix inserted" style="color:#36acaa">+</span><span class="token inserted-sign inserted line" style="color:#36acaa">      return this._cache.query(query);</span><br></span><span class="token-line" style="color:#393A34"><span class="token inserted-sign inserted line" style="color:#36acaa"></span><span class="token inserted-sign inserted prefix inserted" style="color:#36acaa">+</span><span class="token inserted-sign inserted line" style="color:#36acaa">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token inserted-sign inserted line" style="color:#36acaa"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line"> }</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Please review your custom sources to make any necessary changes. If your methods don&#x27;t support hints, the diffs should rather small, like in the <code>_sync</code> method above. If you want to support <code>hints</code>, you&#x27;ll need to provide alternate code paths for when hints are provided and not, like in the <code>_update</code> and <code>_query</code> methods above.</p><p>We&#x27;re planning to include a guide to writing your own sources with the v0.16 release to clarify all these responsibilities.</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="other-changes">Other changes<a class="hash-link" href="#other-changes" title="Direct link to heading">​</a></h2><ul><li><p><a href="https://github.com/orbitjs/orbit/pull/667" target="_blank" rel="noopener noreferrer">#667</a> The <code>@orbit/jsonapi</code> source now supports the <code>Updatable</code> interface, which can be more user-friendly to directly interact with than the <code>Pullable</code> interface.</p></li><li><p><a href="https://github.com/orbitjs/orbit/pull/669" target="_blank" rel="noopener noreferrer">#669</a> <code>filter</code> | <code>sort</code> | <code>page</code> support has been added to <code>findRelatedRecords</code> queries and all the standard implementations.</p></li><li><p><a href="https://github.com/orbitjs/orbit/pull/671" target="_blank" rel="noopener noreferrer">#671</a> Explicit source <code>activate</code> and <code>deactivate</code> methods have been added to provide hooks to ensure that sources have performed any setup and teardown steps prior to processing. These hooks are automatically called as part of coordinator activation / deactivation, and sources themselves will auto-activate by default (note that this is an async process that can be watched via the new <code>activated</code> property).</p></li><li><p><a href="https://github.com/orbitjs/orbit/pull/673" target="_blank" rel="noopener noreferrer">#673</a> Whenever tasks are cancelled and removed from a queue (such as a source&#x27;s <code>requestQueue</code> or <code>syncQueue</code>), the promise associated with that task will now always be rejected (if it hasn&#x27;t already settled). You can control the rejection error or use the default error.</p></li></ul><h2 class="anchor anchorWithStickyNavbar_31ik" id="other-deprecations--breaking-changes">Other deprecations / breaking changes<a class="hash-link" href="#other-deprecations--breaking-changes" title="Direct link to heading">​</a></h2><ul><li><p><a href="https://github.com/orbitjs/orbit/pull/574" target="_blank" rel="noopener noreferrer">#574</a> Deprecate <code>replaceRecord</code> op in favor of <code>updateRecord</code>.</p></li><li><p><a href="https://github.com/orbitjs/orbit/pull/573" target="_blank" rel="noopener noreferrer">#573</a> Expose <code>assert</code> + <code>deprecate</code> only on OrbitGlobal.</p></li><li><p><a href="https://github.com/orbitjs/orbit/pull/567" target="_blank" rel="noopener noreferrer">#567</a> Define <code>Listener</code> interface and remove support for explicit binding object in listeners.</p></li></ul><h2 class="anchor anchorWithStickyNavbar_31ik" id="committers">Committers<a class="hash-link" href="#committers" title="Direct link to heading">​</a></h2><p>Many thanks to the committers who made v0.16 possible:</p><ul><li>Alexey (<a href="https://github.com/Raiondesu" target="_blank" rel="noopener noreferrer">@Raiondesu</a>)</li><li>Andrey Mikhaylov (<a href="https://github.com/lolmaus" target="_blank" rel="noopener noreferrer">@lolmaus</a>)</li><li>Bernhard Halbartschlager (<a href="https://github.com/Bernhard---H" target="_blank" rel="noopener noreferrer">@Bernhard---H</a>)</li><li>Dan Gebhardt (<a href="https://github.com/dgeb" target="_blank" rel="noopener noreferrer">@dgeb</a>)</li><li>Gerald Gayowsky (<a href="https://github.com/ggayowsky" target="_blank" rel="noopener noreferrer">@ggayowsky</a>)</li><li>Luke Melia (<a href="https://github.com/lukemelia" target="_blank" rel="noopener noreferrer">@lukemelia</a>)</li><li>Miguel Camba (<a href="https://github.com/cibernox" target="_blank" rel="noopener noreferrer">@cibernox</a>)</li><li>Paul Chavard (<a href="https://github.com/tchak" target="_blank" rel="noopener noreferrer">@tchak</a>)</li><li>Paweł Bator (<a href="https://github.com/jembezmamy" target="_blank" rel="noopener noreferrer">@jembezmamy</a>)</li><li>Pieter-Jan Vandenbussche (<a href="https://github.com/PieterJanVdb" target="_blank" rel="noopener noreferrer">@PieterJanVdb</a>)</li><li>Simon Ihmig (<a href="https://github.com/simonihmig" target="_blank" rel="noopener noreferrer">@simonihmig</a>)</li></ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/orbitjs/orbit/edit/main/website/versioned_docs/version-0.16/whats-new.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_13-_"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/0.16/getting-started"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Getting started</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/0.16/packages"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Packages</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#changelog-and-release-notes" class="table-of-contents__link toc-highlight">Changelog and release notes</a></li><li><a href="#new-and-renamed-packages" class="table-of-contents__link toc-highlight">New (and renamed) packages</a></li><li><a href="#build-targets" class="table-of-contents__link toc-highlight">Build targets</a></li><li><a href="#request-hints" class="table-of-contents__link toc-highlight">Request hints</a></li><li><a href="#memory-sources-can-now-be-rebased" class="table-of-contents__link toc-highlight">Memory sources can now be &quot;rebased&quot;</a></li><li><a href="#polymorphic-relationship-support" class="table-of-contents__link toc-highlight">Polymorphic relationship support</a></li><li><a href="#jsonapi-source-customizations" class="table-of-contents__link toc-highlight">JSON:API source customizations</a></li><li><a href="#preliminary-support-jsonapi-operations" class="table-of-contents__link toc-highlight">Preliminary: Support JSON:API operations</a></li><li><a href="#breaking-new-expectations-for-sources" class="table-of-contents__link toc-highlight">Breaking: New expectations for sources!</a></li><li><a href="#other-changes" class="table-of-contents__link toc-highlight">Other changes</a></li><li><a href="#other-deprecations--breaking-changes" class="table-of-contents__link toc-highlight">Other deprecations / breaking changes</a></li><li><a href="#committers" class="table-of-contents__link toc-highlight">Committers</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/intro">Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://gitter.im/orbitjs/orbit.js" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Gitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://twitter.com/orbitjs" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/orbit.js" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/orbitjs/orbit" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2014-2022 Cerebris Corporation.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.21463acc.js"></script>
<script src="/assets/js/main.7f38654e.js"></script>
</body>
</html>